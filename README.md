## Koala
添加新功能的同时减少已有模块的修改 ,需要对程序的各个模块/依赖关系进行梳理 ,到后面添加RPC时 ,部分代码已经很乱并且耦合严重.

需要进行重构修改 -> little-koala
* Bean模块作为核心
  * 对外提供标准的Bean 批量初始化/获取 接口
  * 对内提供接口 初始化指定类型(RPC Proxy一类的)的Bean
  * 核心功能与其他模块没有耦合 ,可以独立运行
* RPC包含服务提供/服务消费/服务注册中心三部分
  * 服务提供用来扫描 可提供服务 ,并添加服务信息到注册中心 ; 服务接口收到请求时 ,分析并从Bean模块获取服务Bean进行服务 ,返回服务结果
  * 服务消费用来扫描 需要消费的服务 ,并虚拟一个可用的服务到Bean里 ; 当程序需要消费服务时 ,从中心获取这个服务的信息 ,并连接服务
  * 服务中心使用ZooKeeper管理服务提供的信息 , 并维护一个当前消费者的列表 ,当目标服务发生变更时 ,及时提醒消费者
* ORM
  * 根据数据库表生成POJO类
  * 自动生成基础的查询语句和方法
  * 提供较易扩展的SQL交互方式
* Webservice
  * SOAP 暂无
  * Restful远程调用 ,并根据指定的JSON报文生成POJO类和调用接口
* Generator
  * 支持代码生成


## 项目目标
搭建一个后端的服务器集群框架
> 运行在 Tomcat/Jetty/端口直连 上 ,对外使用Http协议提供服务
> 内部服务由集群提供 ,并注册在ZooKeeper上 ; 服务传输由Protobuf序列化
> 使用ORM 和 自动化的代码/文件生成 简化数据库的操作
> ...

## 项目进程
| 阶段 | 描述 | 完成度 |待完成|
| -------| -------| -------|-------|
|Learning|自己实现DI / RPC / Auto Generate / ORM / Micro Service 等常用的服务端技术 ,探究原理和使用场景|80%|ORM|
|Merge|查看实现的东西是否有可替代的/更优秀的轮子存在 ,并替换组合|0%||
|Use|使用新的框架做一些实质性的'产品'|0%||


## 使用框架
* 基础工具
    * Google. guava : 大量的实用性工具
    * Alibaba. fastjson : 支持国产 :)
    * snakeyaml : 读取yaml文件
    * ibeetl : 模版生成
    * Slf4j : 日志
    * Junit : 测试
    * projectlombok : 简化一些不影响逻辑的set/get代码

* 第一阶段 : 主要是了解原理 ,使用了尽量少的框架
    * okhttp : 简洁易用的http连接工具 ,作为http外部服务的交互工具
    * (优化) cglib : 字节码增强 ,替代JDK实现
    * zookeeper : 连接zookeeper server

## 记录
### 20170707
完成了baby-koala的RPC部分 ,看起来就是骑着一辆除了响铃不响哪儿都响的自行车上了高速路 ,跌跌撞撞还算能用 .因为急于实现 ,段时间内写出来的代码堆积且无序 ,对原有的部分也产生了影响 (原有的也比较乱).

总结了一下已有的东西 ,思想方面还是学到了不少 ,可代码还是越写越乱 .准备把ORM实现过后就开始第一期的重构 ,对项目的各个模块进行划分 ,把类的名称和权责定义好.

